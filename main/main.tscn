[gd_scene load_steps=14 format=3 uid="uid://72lu3y2bauhu"]

[ext_resource type="Script" path="res://main/main.gd" id="1_v46vx"]
[ext_resource type="PackedScene" uid="uid://bp7qr10cgion5" path="res://scenes/buttons/penguin_turret_button.tscn" id="2_syn2g"]
[ext_resource type="Texture2D" uid="uid://cou1iq062mjjj" path="res://images/monkey_turret.jpg" id="3_gwy8r"]
[ext_resource type="PackedScene" uid="uid://cvpgx5dmcfpy2" path="res://scenes/turrets/monkey_turret_scene.tscn" id="4_2ving"]
[ext_resource type="Script" path="res://addons/godot_state_charts/state_chart.gd" id="5_5dvxe"]
[ext_resource type="Texture2D" uid="uid://c082vppcw4kco" path="res://images/penguin_turret.jpg" id="5_axnjb"]
[ext_resource type="Script" path="res://addons/godot_state_charts/compound_state.gd" id="6_0lr6o"]
[ext_resource type="PackedScene" uid="uid://cydpa4ly2d8x0" path="res://scenes/turrets/penguin_turret_scene.tscn" id="6_mxkvs"]
[ext_resource type="Script" path="res://addons/godot_state_charts/atomic_state.gd" id="7_5crt2"]
[ext_resource type="Texture2D" uid="uid://bwcu567veg558" path="res://images/bear_turret.jpg" id="7_igcng"]
[ext_resource type="PackedScene" uid="uid://crbhgmq7i4x8s" path="res://scenes/turrets/bear_turret_scene.tscn" id="7_n456q"]
[ext_resource type="Script" path="res://addons/godot_state_charts/transition.gd" id="8_dkxsf"]

[sub_resource type="Environment" id="Environment_wmip2"]
background_mode = 1
background_color = Color(0.223529, 0.247059, 0.411765, 1)
ssao_enabled = true
ssil_enabled = true
glow_normalized = true
glow_intensity = 1.13
glow_strength = 1.5
adjustment_enabled = true
adjustment_contrast = 1.25

[node name="main" type="Node3D"]
script = ExtResource("1_v46vx")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.687303, 0.726371, 0, -0.726371, 0.687303, 8.33979, 8.906, 13.8845)
current = true
fov = 60.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.639049, -0.589394, -0.494197, 0.651928, 0.074087, 0.754653, -0.408175, -0.804441, 0.431588, -19.0181, 14.6521, 8.48825)
light_energy = 1.2
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_wmip2")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchor_right = 0.999
anchor_bottom = 1.003
offset_right = 0.151855
offset_bottom = 0.0559692

[node name="monkey_placement_Button" parent="Control" instance=ExtResource("2_syn2g")]
clip_contents = true
custom_minimum_size = Vector2(100, 100)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -175.5
offset_top = -110.0
offset_right = -75.4998
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
expand_icon = true
button_icon = ExtResource("3_gwy8r")
button_draggable = ExtResource("4_2ving")
activity_cost = 15

[node name="penguin_placement_Button" parent="Control" instance=ExtResource("2_syn2g")]
custom_minimum_size = Vector2(100, 100)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -50.4999
offset_top = -110.0
offset_right = 49.5001
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
expand_icon = true
button_icon = ExtResource("5_axnjb")
button_draggable = ExtResource("6_mxkvs")
activity_cost = 40

[node name="bear_placement_Button" parent="Control" instance=ExtResource("2_syn2g")]
custom_minimum_size = Vector2(100, 100)
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = 74.5001
offset_top = -110.0
offset_right = 174.5
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
expand_icon = true
button_icon = ExtResource("7_igcng")
button_draggable = ExtResource("7_n456q")
activity_cost = 150

[node name="money_label" type="Label" parent="Control"]
layout_mode = 0
offset_right = 1149.0
offset_bottom = 23.0
theme_override_font_sizes/font_size = 28
text = "Money: 0 Â¥"
horizontal_alignment = 1

[node name="score_label" type="Label" parent="Control"]
layout_mode = 0
offset_left = 953.0
offset_top = 1.0
offset_right = 1058.0
offset_bottom = 40.0
theme_override_font_sizes/font_size = 28
text = "Score: 0"
horizontal_alignment = 1

[node name="wave_button" type="Button" parent="Control"]
layout_mode = 0
offset_left = 5.0
offset_top = 6.0
offset_right = 111.0
offset_bottom = 37.0
text = "Spawn Wave"

[node name="WaveState" type="Node" parent="."]
script = ExtResource("5_5dvxe")

[node name="CompoundWaveState" type="Node" parent="WaveState"]
script = ExtResource("6_0lr6o")
initial_state = NodePath("Initial")

[node name="Initial" type="Node" parent="WaveState/CompoundWaveState"]
script = ExtResource("7_5crt2")

[node name="Active" type="Node" parent="WaveState/CompoundWaveState/Initial"]
script = ExtResource("8_dkxsf")
to = NodePath("../../Active")
event = &"to_active"

[node name="Complete" type="Node" parent="WaveState/CompoundWaveState"]
script = ExtResource("7_5crt2")

[node name="Active" type="Node" parent="WaveState/CompoundWaveState/Complete"]
script = ExtResource("8_dkxsf")
to = NodePath("../../Active")
event = &"to_active"

[node name="Active" type="Node" parent="WaveState/CompoundWaveState"]
script = ExtResource("7_5crt2")

[node name="Complete" type="Node" parent="WaveState/CompoundWaveState/Active"]
script = ExtResource("8_dkxsf")
to = NodePath("../../Complete")
event = &"to_complete"

[connection signal="pressed" from="Control/wave_button" to="." method="_on_wave_button_pressed"]
[connection signal="state_entered" from="WaveState/CompoundWaveState/Complete" to="." method="_on_complete_state_entered"]
[connection signal="state_entered" from="WaveState/CompoundWaveState/Active" to="." method="_on_active_state_entered"]
